---
title: Pagination
description: Working with paginated data in Glueful framework
navigation:
  icon: i-lucide-database
---

# Pagination

Glueful provides a robust pagination system for handling large datasets efficiently.

## Basic Pagination

The QueryBuilder's `paginate` method simplifies creating paginated results:

```php
use Glueful\Database\Connection;
use Glueful\Database\QueryBuilder;

// Initialize query builder
$connection = new Connection();
$db = new QueryBuilder($connection->getPDO(), $connection->getDriver());

// Get paginated results (page 1, 25 items per page)
$results = $db->table('users')
    ->select(['id', 'name', 'email'])
    ->where('status', '=', 'active')
    ->orderBy('created_at', 'DESC')
    ->paginate(1, 25);
```

## Pagination Response Structure

The paginate method returns a structured array with all necessary pagination data:

```php
[
    'data' => [...],           // Array of records for current page
    'current_page' => 1,       // Current page number
    'per_page' => 25,          // Items per page
    'total' => 150,            // Total number of records
    'last_page' => 6,          // Total number of pages
    'has_more' => true,        // Whether there are more pages
    'from' => 1,               // First record index on current page
    'to' => 25                 // Last record index on current page
]
```

## Pagination in Controllers

A typical controller method using pagination:

```php
public function getUsers(Request $request): mixed
{
    $page = (int)($request->get('page', 1));
    $perPage = (int)($request->get('per_page', 25));

    // Validate and cap per_page to avoid performance issues
    $perPage = min($perPage, 100);

    $db = new QueryBuilder($this->connection->getPDO(), $this->connection->getDriver());

    // Apply filters from request
    $filters = [];
    if ($request->has('status')) {
        $filters['status'] = $request->get('status');
    }

    // Get paginated results
    $results = $db->table('users')
        ->select(['id', 'name', 'email', 'status', 'created_at'])
        ->where($filters)
        ->orderBy($request->get('sort_by', 'created_at'), $request->get('sort_order', 'desc'))
        ->paginate($page, $perPage);

    return Response::ok($results, 'Users retrieved successfully')->send();
}
```

## Using the Pagination Class

For more control, you can use the Pagination class directly:

```php
use Glueful\Http\Pagination;

// Create a pagination object
$pagination = new Pagination(
    $limit = 25,      // Items per page
    $offset = 0,      // Starting offset
    $total = 150      // Total items
);

// Get pagination metadata
$totalPages = $pagination->getTotalPages();
$currentPage = $pagination->getCurrentPage();
$hasNextPage = $pagination->hasNextPage();
$hasPreviousPage = $pagination->hasPreviousPage();
```

## Configuration

Pagination settings can be configured in `config/pagination.php`:

```php
// config/pagination.php
return [
    // Enable/disable pagination globally
    'enabled' => env('PAGINATION_ENABLED', true),

    // Default number of items per page
    'default_size' => env('PAGINATION_DEFAULT_SIZE', 25),

    // Maximum allowed items per page
    'max_size' => env('PAGINATION_MAX_SIZE', 100),

    // Maximum number of items in a list
    'list_limit'=> env('PAGINATION_LIST_LIMIT', 1000)
];
```

## Frontend Integration

Frontend pagination components can easily integrate with the API response structure:

```javascript
// Example Vue.js component using pagination data
async fetchUsers(page = 1) {
  try {
    const response = await api.get('/users', {
      params: {
        page: page,
        per_page: this.perPage,
        status: this.statusFilter,
        sort_by: this.sortBy,
        sort_order: this.sortOrder
      }
    });

    // Update component data
    this.users = response.data.data;
    this.pagination = {
      currentPage: response.data.current_page,
      lastPage: response.data.last_page,
      perPage: response.data.per_page,
      total: response.data.total
    };
  } catch (error) {
    console.error("Failed to fetch users:", error);
  }
}
```
