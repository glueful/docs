---
title: Creating Extensions
description: Guide to creating custom extensions for Glueful
navigation:
  icon: i-lucide-blocks
---
This section provides a guide to creating your own custom extensions for the Glueful framework.

## Basic Structure

Extensions in Glueful follow a standard directory and namespace structure:

```
extensions/
  YourExtension/       # Extension folder (PascalCase)
    YourExtension.php  # Main extension class (same name as folder)
    config.php         # Extension configuration (optional)
    routes.php         # Extension routes (optional)
    README.md          # Documentation for your extension
    Other files and directories...
```

## Creating Extensions with CLI

The easiest way to create a new extension is using the built-in command-line interface. This will generate all the necessary files and structure automatically:

```bash
php glueful extensions create YourExtension
```

This command will:
1. Create the extension directory with the proper name
2. Generate the main extension class file with all required methods
3. Create a README.md template file
4. Set up the proper namespace and inheritance

After running this command, you'll see output listing all the files created. You can then edit these files to implement your extension's functionality.

## Core Files

### 1. Main Extension Class

The main extension class must implement the `Glueful\Extensions` interface:

```php
<?php
declare(strict_types=1);

namespace Glueful\Extensions\YourExtension;

use Glueful\Extensions;

/**
 * YourExtension for Glueful
 * 
 * Description of what your extension does.
 */
class YourExtension implements Extensions
{
    /**
     * Initialize extension
     */
    public static function initialize(): void
    {
        // Initialize your extension
        // Load configuration, set up services, etc.
    }
    
    /**
     * Register extension-provided services
     */
    public static function registerServices(): void
    {
        // Register any services provided by your extension
    }
    
    /**
     * Register extension-specific routes
     */
    public static function registerRoutes(): void
    {
        // Routes are defined in the routes.php file
        // This method is called automatically to load them
    }
    
    /**
     * Get extension metadata
     */
    public static function getMetadata(): array
    {
        return [
            'name' => 'YourExtension',
            'description' => 'Description of what your extension does',
            'version' => '1.0.0',
            'author' => 'Your Name',
            'requires' => [
                'glueful' => '>=1.0.0',
                'php' => '>=8.1.0',
                'extensions' => []
            ]
        ];
    }
}
```

### 2. Configuration File (Optional)

If your extension needs configuration, create a `config.php` file:

```php
<?php
/**
 * YourExtension Configuration
 */
return [
    'option1' => 'value1',
    'option2' => 'value2',
    // Add your configuration options
];
```

### 3. Routes File (Optional)

If your extension provides API endpoints, create a `routes.php` file:

```php
<?php
declare(strict_types=1);

use Glueful\Http\Router;
use Symfony\Component\HttpFoundation\Request;
use Glueful\Http\Response;

/**
 * YourExtension Routes
 */
Router::group('/your-extension', function() {
    Router::get('/', function (Request $request) {
        return Response::ok(['message' => 'YourExtension is working!'])->send();
    });
    
    // Add more routes as needed
});
```

## Extension Registration

To enable your extension, edit the `config/extensions.php` file or use the CLI command:

```bash
php glueful extensions enable YourExtension
```

## Namespace Structure

All classes in your extension should use the namespace `Glueful\Extensions\YourExtension\`. For example:

```php
namespace Glueful\Extensions\YourExtension\Services;

class YourService
{
    // Service implementation
}
```

## Step-By-Step Guide

Here's a complete walkthrough to create a new extension:

1. **Create a new extension scaffold with the CLI**

   The simplest way to get started is to use the CLI command:

   ```bash
   php glueful extensions create YourExtension
   ```

   This will automatically:
   - Create the extension directory with proper structure
   - Generate the extension class with all required methods
   - Create a README.md template
   - Set up proper namespacing

2. **Alternatively, create the extension manually**

   If you prefer to create files manually:
   
   ```bash
   # Create extension directory
   mkdir extensions/YourExtension
   
   # Create main extension class file
   touch extensions/YourExtension/YourExtension.php
   
   # Create README
   touch extensions/YourExtension/README.md
   ```

3. **Implement required methods**

   Edit the main class file to implement all required methods:
   - `initialize()`
   - `registerServices()`
   - `registerMiddleware()`
   - `getMetadata()`

4. **Add configuration (optional)**

   Create a `config.php` file if your extension needs configuration.

5. **Add routes (optional)**

   Create a `routes.php` file if your extension provides API endpoints.

6. **Enable the extension**

   ```bash
   php glueful extensions enable YourExtension
   ```

7. **Validate your extension**

   Ensure your extension follows best practices:

   ```bash
   php glueful extensions validate YourExtension
   ```

8. **Run database migrations (if needed)**

   If your extension requires database tables, run:

   ```bash
   php glueful db:migrate
   ```

9. **Update API documentation**

   Generate updated API documentation and api definitions:

   ```bash
   php glueful generate:json api-definitions
   ```

## Extension Management CLI Commands

Glueful provides a rich set of CLI commands for managing extensions:

```bash
# List all installed extensions and their status
php glueful extensions list

# Get detailed information about an extension
php glueful extensions info YourExtension

# Enable an extension
php glueful extensions enable YourExtension

# Disable an extension
php glueful extensions disable YourExtension

# Create new extension scaffold
php glueful extensions create YourExtension

# Install extension from URL or archive file
php glueful extensions install https://example.com/extension.zip YourExtension

# Validate an extension's structure and dependencies
php glueful extensions validate YourExtension

# Show registered extension namespaces
php glueful extensions namespaces
```

You can see the full help for the extension commands with:

```bash
php glueful extensions --help
```

## Extension Lifecycle

- **Loading**: Extensions are discovered and loaded by ExtensionsManager
- **Initialization**: `initialize()` method called
- **Service Registration**: `registerServices()` called to add services
- **Middleware Registration**: `registerMiddleware()` called to add middleware
- **Request Processing**: `process()` handles extension-specific requests

## Best Practices

1. **Keep extensions self-contained**: Each extension should be independent and not rely on other extensions unless explicitly declared as a dependency.
2. **Use proper namespacing**: All classes should be properly namespaced to avoid conflicts.
3. **Document your extension**: Include a README.md file with documentation on how to use your extension.
4. **Follow coding standards**: Follow the same coding standards as the rest of the Glueful framework.
5. **Include tests**: Write tests for your extension functionality.
6. **Use dependency injection**: When possible, use dependency injection to make your code more testable and maintainable.
7. **Naming**: Use PascalCase for extension names (e.g., PaymentGateway)
8. **Documentation**: Include docblocks with description, version, and author
9. **Error Handling**: Return proper error responses with status codes
10. **Dependencies**: Check for required dependencies in `initialize()`

## Example Extension: Social Login

Here's a brief overview of a real extension that's available in Glueful - the Social Login extension:

The Social Login extension adds OAuth authentication capabilities to your Glueful application, allowing users to sign in using popular social platforms like Google, Facebook, GitHub, and Apple.

Key features include:
- Multiple provider support
- Automatic user registration
- Profile synchronization 
- Account linking
- Token generation and session management

For implementation details, you can check the SocialLogin extension in the extensions directory.

## Additional Extension Methods

While the core required methods (`initialize()`, `registerServices()`, `registerMiddleware()`, and `process()`) are essential for basic extension functionality, Glueful's extension system provides several additional methods that you can override to enhance your extensions:

### Resource and Health Monitoring

```php
/**
 * Validate extension health
 * 
 * Checks if the extension is functioning correctly.
 * 
 * @return array Health status with 'healthy' (bool) and 'issues' (array) keys
 */
public static function checkHealth(): array
{
    return [
        'healthy' => true,
        'issues' => [],
        'metrics' => [
            'memory_usage' => 0,
            'execution_time' => 0,
            'database_queries' => 0,
            'cache_usage' => 0
        ]
    ];
}

/**
 * Get extension resource usage
 * 
 * Returns information about resources used by this extension.
 * 
 * @return array Resource usage metrics
 */
public static function getResourceUsage(): array
{
    // Default implementation returns empty metrics
    return [
        'memory_usage' => 0, // bytes
        'execution_time' => 0, // milliseconds
        'database_queries' => 0, // count
        'cache_usage' => 0 // bytes
    ];
}
```

These methods allow your extension to participate in the Glueful health monitoring system, reporting on its status and resource usage for the admin dashboard.

### Environment-Specific Configuration

```php
/**
 * Check environment-specific configuration
 * 
 * Determines if the extension should be enabled in the current environment.
 * 
 * @param string $environment Current environment (dev, staging, production)
 * @return bool Whether the extension should be enabled in this environment
 */
public static function isEnabledForEnvironment(string $environment): bool
{
    // Default implementation always returns true
    // Override for environment-specific behavior
    return true;
}
```

Use this method to control whether your extension should be active in different environments. For example, you might want to disable certain features in production.

### Dependency Management

```php
/**
 * Get extension dependencies
 * 
 * Returns a list of other extensions this extension depends on.
 * 
 * @return array List of extension dependencies
 */
public static function getDependencies(): array
{
    $metadata = static::getMetadata();
    return $metadata['requires']['extensions'] ?? [];
}
```

This method allows the extension system to resolve dependencies between extensions and ensure they're loaded in the correct order.

### Documentation Support

```php
/**
 * Get extension screenshots
 * 
 * Returns an array of screenshots for the extension.
 * By default, looks for images in the 'screenshots' directory.
 * 
 * @return array Screenshots information
 */
public static function getScreenshots(): array
{
    // Implementation details omitted for brevity
    // Automatically detects screenshots in the extension's screenshots directory
}

/**
 * Get extension changelog
 * 
 * Returns the changelog information for this extension.
 * By default, attempts to parse a CHANGELOG.md file if present.
 * 
 * @return array Version history with changes
 */
public static function getChangelog(): array
{
    // Implementation details omitted for brevity
    // Automatically parses a CHANGELOG.md file in the extension directory
}
```

These methods support the extension documentation system, automatically providing screenshots and changelog information to the admin UI.

## Extension Metadata Standard

Glueful follows a standardized metadata format for extensions. The `getMetadata()` method should return an array with the following structure:

```php
return [
    'name' => 'YourExtension',              // Required: Display name
    'description' => 'What your extension does', // Required: Brief description
    'version' => '1.0.0',                   // Required: Semantic version
    'author' => 'Your Name',                // Required: Author name or organization
    'requires' => [                         // Required: Dependencies
        'glueful' => '>=1.0.0',             // Minimum Glueful version
        'php' => '>=8.1.0',                 // Minimum PHP version
        'extensions' => []                  // Required extensions
    ],
    // Optional fields below
    'homepage' => 'https://yourextension.com',
    'documentation' => 'https://docs.yourextension.com',
    'license' => 'MIT',
    'keywords' => ['tag1', 'tag2'],
    'category' => 'authentication',
    'features' => [
        'feature1' => 'Description of feature 1',
        'feature2' => 'Description of feature 2'
    ],
    'compatibility' => [
        'browsers' => ['chrome', 'firefox', 'safari'],
        'databases' => ['mysql', 'postgresql']
    ],
    'settings' => [
        'configurable' => true,
        'has_admin_ui' => true,
    ]
];
```

The Glueful extension system automatically extracts metadata from your extension's class docblock if available, looking for `@description`, `@version`, and `@author` tags.
