---
title: Notification System
description: Working with Glueful's notification system
navigation:
  icon: i-lucide-bell
---

# Notification System

Glueful provides a robust, multi-channel notification system for sending notifications to your users through various delivery methods.

## Overview

The notification system lets you send messages to users through multiple channels including:

- In-app notifications (stored in database)
- Email notifications (via the Email Notification extension)
- Custom notification channels (via extensions)

## Core Components

### Notification Service

The central service that manages the entire notification lifecycle:

```php
// Sending a notification
$notificationService->send(
    'account_verification',    // notification type
    $user,                     // notifiable entity
    'Verify Your Account',     // subject
    [                          // additional data
        'verification_url' => $url,
        'expiry_minutes' => 30
    ],
    [                          // options
        'channels' => ['email', 'database'],
        'priority' => 'high'
    ]
);

// Retrieving notifications
$notifications = $notificationService->getNotifications($user, true); // true = only unread

// Mark as read
$notificationService->markAsRead($notification);
```

### NotificationDispatcher

Handles sending notifications through appropriate channels and manages notification events:

```php
// The dispatcher is usually used internally by the NotificationService
$dispatcher = new NotificationDispatcher($channelManager);
$result = $dispatcher->send($notification, $notifiable, ['email', 'database']);
```

### ChannelManager

Registers and manages notification channels:

```php
$channelManager = new ChannelManager();
$channelManager->registerChannel(new EmailChannel());
$channelManager->registerChannel(new DatabaseChannel());
```

## Notification Events

The system triggers events during the notification lifecycle:

- `NotificationSent`: When a notification is successfully sent
- `NotificationFailed`: When notification delivery fails
- `NotificationRead`: When a user reads a notification
- `NotificationScheduled`: When a notification is scheduled for future delivery

## Creating Notifiable Entities

Any entity that can receive notifications must implement the `Notifiable` interface:

```php
class User implements \Glueful\Notifications\Contracts\Notifiable
{
    private string $uuid;
    private string $email;

    public function routeNotificationFor(string $channel)
    {
        if ($channel === 'email') {
            return $this->email;
        }
        return null;
    }

    public function getNotifiableId(): string
    {
        return $this->uuid;
    }

    public function getNotifiableType(): string
    {
        return 'user';
    }

    public function shouldReceiveNotification(string $notificationType, string $channel): bool
    {
        // Check user preferences or other logic
        return true;
    }

    public function getNotificationPreferences(): array
    {
        return []; // Return notification preferences
    }
}
```
